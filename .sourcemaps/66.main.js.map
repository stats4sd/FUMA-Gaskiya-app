{"version":3,"sources":["../../src/pages/champs/detail-champs/detail-champs.module.ts","../../src/pages/champs/detail-champs/detail-champs.ts"],"names":[],"mappings":"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","file":"66.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { DetailChampsPage } from './detail-champs';\r\n\r\n@NgModule({\r\n  declarations: [DetailChampsPage],\r\n  imports: [IonicPageModule.forChild(DetailChampsPage)],\r\n  exports: [DetailChampsPage]\r\n})\r\nexport class DetailChampsPagePageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/champs/detail-champs/detail-champs.module.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams, LoadingController, AlertController, ToastController, IonicPage } from 'ionic-angular';\n//import { ModifierChampsPage } from '../modifier-champs/modifier-champs';\nimport { PouchdbProvider } from '../../../providers/pouchdb-provider';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Storage } from '@ionic/storage';\n\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\nimport { Geolocation } from '@ionic-native/geolocation';\n\n/*\n  Generated class for the DetailChamps page.\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n  Ionic pages and navigation.\n*/\n\n@IonicPage()\n@Component({\n  selector: 'page-detail-champs',\n  templateUrl: 'detail-champs.html'\n})\nexport class DetailChampsPage {\n\n  champ: any = {};\n  ancien_nom: any;\n  ancien_superficie: any;\n  ancien_type_sole: any;\n  ancien_longitude: any;\n  ancien_latitude: any;\n\n  champID: any;\n\n  champsForm: any;\n  grandChamps: any;\n  champs: any;\n  typeSoles: any = [];\n  producteurs: any = [];\n  selectedTypeSole: any;\n  selectedProducteur: any = [];\n  nom_producteur: any = '';\n  allChamps: any;\n  id_champs: any;\n  ancienMatriculeProducteur: any;\n  longitude: any;\n  latitude: any;\n  modifierForm: boolean = false;\n\n\n   constructor(public servicePouchdb: PouchdbProvider, public loadingCtl: LoadingController, public geolocation: Geolocation, public formBuilder: FormBuilder, public toastCtl: ToastController, public navCtrl: NavController, public navParams: NavParams, public alertCtl: AlertController) {\n    this.champ = this.navParams.data.champ;\n    this.champID = this.champ._id;\n  }\n\n  update_essais(matricule, champs){\n    \n    let loading = this.loadingCtl.create({\n      content: 'Mise à jour des informations en cours...'\n    });\n\n    loading.present();\n\n    this.servicePouchdb.getPlageDocsRapide('fuma:essai:'+matricule, 'fuma:essai:'+matricule+'\\uffff').then((essais) => {\n      if(essais){\n        essais.map((essai) => {\n         if(essai.doc.data.id_champs === champs.id_champs){\n            essai.doc.data.nom_champs = champs.nom;\n            essai.doc.data.superficie = champs.superficie;\n            essai.doc.data.type_sole = champs.type_sole;\n            essai.doc.data.longitude = champs.longitude;\n            essai.doc.data.latitude = champs.latitude;\n\n            this.servicePouchdb.updateDoc(essai.doc);\n         }\n        });\n\n        loading.dismissAll();\n\n        this.modifierForm = false;\n        this.msg('Champs bien enrégistré')\n        \n      }\n    })\n\n  }\n  initFrom(){\n    this.grandChamps = this.navParams.data.champ;\n    this.champs = this.grandChamps.data;\n\n    this.selectedProducteur = this.champs.matricule_producteur;\n    this.nom_producteur = this.champs.nom_producteur;\n    this.ancienMatriculeProducteur = this.champs.matricule_producteur;\n    this.selectedTypeSole = this.champs.type_sole;\n    this.id_champs = this.champs.id_champs;\n    this.longitude = this.champs.longitude;\n    this.latitude = this.champs.latitude;\n    \n     // let p: any = [];\n        \n    this.champsForm = this.formBuilder.group({\n      id_champs:[this.champs.id_champs],\n      nom: [this.champs.nom, Validators.required],\n      longitude: [this.champs.longitude],\n      latitude: [this.champs.latitude],\n      superficie: [this.champs.superficie, Validators.required],\n      type_sole: [this.champs.type_sole, Validators.required],\n      matricule_producteur: [this.champs.matricule_producteur],\n      nom_producteur: [this.champs.nom_producteur, Validators.required],\n    });\n    \n  }\n\n  getAllTypeSol(){\n    this.servicePouchdb.getPlageDocs('fuma:type-sole','fuma:type-sole:\\uffff').then((ts) => {\n          this.typeSoles = ts;\n      }, err => console.log(err)); \n  }\n\n  getAllMembre(){\n     this.servicePouchdb.getPlageDocs('fuma:op:membre','fuma:op:membre:\\uffff').then((mbrA) => {\n        this.servicePouchdb.getPlageDocs('koboSubmission_fuma-op-membre','koboSubmission_fuma-op-membre\\uffff').then((mbrK) => {\n        this.producteurs = mbrA.concat(mbrK);\n      }, err => console.log(err));\n    }, err => console.log(err)); \n  }\n\n\n\n  getNomProducteur(){\n    this.producteurs.forEach((p, i) => {\n      if(p.data.matricule_Membre === this.selectedProducteur){\n        this.nom_producteur = p.data.nom_Membre;\n\n         if(this.ancienMatriculeProducteur !== p.data.matricule_Membre){\n            let id = this.generateId(p.data.matricule_Membre);\n            this.id_champs = id;\n          }else{\n            this.id_champs = this.ancienMatriculeProducteur;\n          }\n      } \n    });\n\n    \n  }\n\n  msg(msg: string = ''){\n    let toast = this.toastCtl.create({\n      message: msg,\n      position: 'top',\n      duration: 1000,\n      showCloseButton: true,\n      closeButtonText: 'ok',\n      dismissOnPageChange: true\n    });\n\n    toast.present();\n  }\n\n\n    getPosition(){\n    this.msg('Obtention des coordonnées en cours...');\n    this.geolocation.getCurrentPosition().then((resp) => {\n      this.longitude = resp.coords.longitude;\n      this.latitude = resp.coords.latitude;\n      this.msg('Coordonnées obtenues avec succes!')\n    }, err => {\n      this.msg('Une erreur c\\'est produite lors de l\\obtention des coordonnées. \\nVeuillez reéssayer plus tard!')\n      console.log('')\n    });\n  }\n\n  generateId(matricule){\n    var chars='ABCDEFGHIJKLMNPQRSTUVWYZ'\n    var numbers='0123456789'\n    var randomArray=[]\n    for(let i=0;i<3;i++){\n      var rand = Math.floor(Math.random()*10)\n      randomArray.push(numbers[rand])\n    }\n    //randomArray.push('-')\n    //var rand = Math.floor(Math.random()*24)\n    //randomArray.push(chars[rand])\n    var randomString=randomArray.join(\"\");\n    var Id= matricule+' '+/*+pays+'-'+region+'-'+department+'-'+commune +'-' +village+ */+randomString \n    return Id;\n  }\n\n   modifierChamps(){\n      //  let date = new Date();\n    let champ = this.champsForm.value;\n\n    this.champs.id_champs = champ.id_champs;\n    this.champs.nom = champ.nom;\n    this.champs.longitude = champ.longitude;\n    this.champs.latitude = champ.latitude;\n    this.champs.superficie = champ.superficie;\n    this.champs.type_sole = champ.type_sole;\n    this.champs.matricule_producteur = champ.matricule_producteur;\n    this.champs.nom_producteur = champ.nom_producteur;\n    \n      this.grandChamps.data = this.champs;\n      this.servicePouchdb.updateDocReturn(this.grandChamps).then((res) => {\n        this.grandChamps._rev = res.rev;\n        this.champ = this.grandChamps;\n        if(this.ancien_nom !== champ.nom || this.ancien_superficie !== champ.superficie || this.ancien_type_sole !== champ.type_sole || this.ancien_longitude !== champ.longitude || this.ancien_latitude !== champ.latitude){\n          this.update_essais(champ.matricule_producteur, champ)\n        }else{\n          this.modifierForm = false;\n          this.msg('Champs bien enrégistré')\n        }\n        /*this.modifierForm = false;\n        this.msg('Champs bien enrégistré')*/\n      }) ;\n\n      //this.navCtrl.pop();\n      //toast.present();\n      \n\n   // }\n  }\n\n  annuler(){\n    //this.navCtrl.pop();\n    this.modifierForm = false;\n  }\n\n\n\n  ionViewDidEnter() {\n    //console.log('ionViewDidLoad DetailUnionPage');\n    /*this.servicePouchdb.getDocById(this.champID).then((c) => {\n      this.champ = c;\n    }, err => console.log(err))*/\n\n    this.initFrom();\n    this.getAllTypeSol();\n    this.getAllMembre();\n  }\n\n  editer(champ){\n    //this.navCtrl.push('ModifierChampsPage', {'champ': champ});\n    this.modifierForm = true;\n  }\n\n  supprimer(champ){\n    let alert = this.alertCtl.create({\n      title: 'Suppression champs',\n      message: 'Etes vous sûr de vouloir supprimer cet champs ?',\n      buttons:[\n        {\n          text: 'Non',\n          handler: () => console.log('suppression annulée')\n \n        },\n        {\n          text: 'Oui',\n          handler: () => {\n            this.servicePouchdb.deleteDoc(champ);\n            let toast = this.toastCtl.create({\n              message:'Champs bien supprié',\n              position: 'top',\n              duration: 3000\n            });\n\n            toast.present();\n            this.navCtrl.pop();\n          }\n        }\n      ]\n    });\n\n    alert.present();\n  }\n\n \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/champs/detail-champs/detail-champs.ts"],"sourceRoot":""}