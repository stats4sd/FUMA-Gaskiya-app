{"version":3,"sources":["../../src/pages/champs/ajouter-champs/ajouter-champs.ts","../../src/pages/champs/ajouter-champs/ajouter-champs.module.ts"],"names":[],"mappings":"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","file":"64.js","sourcesContent":["import { Component } from '@angular/core';\nimport { NavController, NavParams, ToastController, ViewController, IonicPage } from 'ionic-angular';\nimport { Validators, FormBuilder } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Storage } from '@ionic/storage';\nimport { PouchdbProvider } from '../../../providers/pouchdb-provider';\nimport { AutoCompletion } from '../../../providers/auto-completion';\nimport { Device } from '@ionic-native/device';\nimport { Sim } from '@ionic-native/sim';\nimport { Geolocation } from '@ionic-native/geolocation'\n\n \n/*\n  Generated class for the AjouterChamps page.\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n  Ionic pages and navigation.\n*/\n\n@IonicPage()\n@Component({\n  selector: 'page-ajouter-champs',\n  templateUrl: 'ajouter-champs.html'\n})\nexport class AjouterChampsPage {\n\n  champsForm: any;\n  typeSoles: any = [];\n  producteurs: any = [];\n  selectedTypeSole: any;\n  selectedProducteur: any = [];\n  nom_producteur: any = '';\n  allChamps: any;\n  imei: any = '';\n  phonenumber: any = '';\n  matricule_producteur: any;\n  longitude: any ='';\n  latitude: any = '';\n  membre: any;\n  nom: any = '';\n  champs: any = [];\n  type_sole: any;\n  superficie: any = '';\n  code_champs: any = '';\n\n  constructor(public navCtrl: NavController, public viewCtl: ViewController, public ServiceAutoCompletion: AutoCompletion, public navParams: NavParams, public sim: Sim, public geolocation: Geolocation, public device: Device, public toastCtl: ToastController, public servicePouchdb: PouchdbProvider, public formBuilder: FormBuilder, public storage: Storage) {\n    \n    if(this.navParams.data.matricule_producteur){\n      this.matricule_producteur = this.navParams.data.matricule_producteur;\n      this.selectedProducteur = this.navParams.data.membre\n      this.nom_producteur = this.navParams.data.nom;\n      this.generecodeChamps(this.selectedProducteur.data.matricule_Membre)\n      //this.typeSoles = this.navParams.data.typeSoles\n    \n      //this.nom_producteur \n        //  this.producteurSelected(this.matricule_producteur);\n    }else{\n\n      let p: any = [];\n    this.servicePouchdb.getPlageDocs('fuma:op:membre','fuma:op:membre:\\uffff').then((mbrA) => {\n      \n        this.servicePouchdb.getPlageDocs('koboSubmission_fuma-op-membre','koboSubmission_fuma-op-membre\\uffff').then((mbrK) => {\n        this.producteurs = mbrA.concat(mbrK);\n\n       \n        this.producteurs.forEach((prod, index) => {\n          p.push(prod.data); \n        });\n\n        this.ServiceAutoCompletion.data = p;\n        //this.ServiceAutoCompletion.data = this.producteurs;\n        //this.allMembres = this.membres\n    }, err => console.log(err));\n\n    }, err => console.log(err)); \n  }\n    //this.chergerTypeSole()\n    let maDate = new Date();\n    let today = this.createDate(maDate.getDate(), maDate.getMonth(), maDate.getFullYear());\n\n    this.champsForm = this.formBuilder.group({\n     // _id:[''],\n      type:['champs'],\n      nom: ['', Validators.required],\n      longitude: [''],\n      latitude: [''],\n      superficie: ['', Validators.required],\n      type_sole: ['', Validators.required],\n      matricule_producteur: [''],\n      nom_producteur: ['', Validators.required],\n      today: [today, Validators.required],\n      deviceid: [''],\n      imei: [''],\n      phonenumber: [''],\n      start: [maDate.toJSON()],\n      end: ['']\n    });\n    \n  }\n\n  chergerTypeSole(){\n    \n    this.servicePouchdb.getPlageDocs('fuma:type-sole','fuma:type-sole:\\uffff').then((ts) => {\n              this.typeSoles = ts;\n    }, err => console.log(err)); \n\n    \n  }\n\n  msg(msg: string = ''){\n    let toast = this.toastCtl.create({\n      message: msg,\n      position: 'top',\n      duration: 3000,\n      showCloseButton: true,\n      closeButtonText: 'ok',\n      dismissOnPageChange: true\n    });\n\n    toast.present();\n  }\n\n  getPosition(){\n    this.msg('Obtention des coordonnées en cours...');\n    this.geolocation.getCurrentPosition().then((resp) => {\n      this.longitude = resp.coords.longitude;\n      this.latitude = resp.coords.latitude;\n      this.msg('Coordonnées obtenues avec succes!')\n    }, err => {\n      this.msg('Une erreur c\\'est produite lors de l\\obtention des coordonnées. \\nVeuillez reéssayer plus tard!')\n      console.log('')\n    });\n  }\n\n  createDate(jour: any, moi: any, annee: any){\n    let s = annee+'-';\n    moi += 1;\n    if(moi < 10){\n      s += '0'+moi+'-';\n    }else{\n      s += moi+'-';\n    }\n\n    if(jour < 10){\n      s += '0'+jour;\n    }else{\n      s += jour;\n    }\n    return s;\n  }\n\n  ionViewDidLoad() {\n    \n    this.chergerTypeSole();\n  \n    this.sim.getSimInfo().then(\n      (info) => {\n        if(info.cards.length > 0){\n          info.cards.forEach((infoCard, i) => {\n            if(infoCard.phoneNumber){\n              this.phonenumber = infoCard.phoneNumber;\n            }\n            if(infoCard.deviceId){\n              this.imei = infoCard.deviceId;\n            }\n          })\n        }else{\n          this.phonenumber = info.phoneNumber;\n          this.imei = info.deviceId;\n        }\n\n      },\n      (err) => console.log('Unable to get sim info: ', err)\n    );\n\n    this.servicePouchdb.getPlageDocs('fuma:champs','fuma:champs:\\uffff').then((ch) => {\n        this.allChamps = ch;\n\n      }, err => console.log(err));      \n  }\n\n  generateId(matricule){\n    var chars='ABCDEFGHIJKLMNPQRSTUVWYZ'\n    var numbers='0123456789'\n    var randomArray=[]\n    for(let i=0;i<3;i++){\n      var rand = Math.floor(Math.random()*10)\n      randomArray.push(numbers[rand])\n    }\n    //randomArray.push('-')\n    //var rand = Math.floor(Math.random()*24)\n    //randomArray.push(chars[rand])\n    var randomString=randomArray.join(\"\");\n    var Id= matricule+' '+'CH-'+/*+pays+'-'+region+'-'+department+'-'+commune +'-' +village+ */+randomString \n    return Id;\n  }\n\n  itemSelected(ev: any){\n    //alert(ev.code_produit);\n    this.producteurs.forEach((prod, index) => {\n      if(prod.data.matricule_Membre === ev.matricule_Membre){\n        this.selectedProducteur = prod;\n        this.nom_producteur = prod.data.nom_Membre;\n        this.generecodeChamps(this.selectedProducteur.data.matricule_Membre)\n      }\n    });\n  }\n\n  /*producteurSelected(matricule){\n    this.nom_producteur = prod.data.nom_Membre;\n    //alert(ev.code_produit);\n   /* this.producteurs.forEach((prod, index) => {\n      if(prod.data.matricule_Membre === matricule){\n        this.selectedProducteur = prod;\n        this.nom_producteur = prod.data.nom_Membre;\n      }\n    });/*\n  }*/\n\n  dechanfChamps(){\n    this.longitude ='';\n    this.latitude = '';\n    this.nom = '';\n    this.type_sole = '';\n    this.superficie = '';\n    this.generecodeChamps(this.selectedProducteur.data.matricule_Membre)\n  }\n\n  generecodeChamps(matricule){\n    this.code_champs = this.generateId(matricule);\n  }\n\n  ajouter(){\n    let date = new Date();\n    let champs = this.champsForm.value;\n    champs.matricule_producteur = this.selectedProducteur.data.matricule_Membre;\n    //champs.nom_producteur = this.selectedProducteur.data.nom_Membre;\n    champs.deviceid = this.device.uuid;\n    champs.phonenumber = this.phonenumber;\n    champs.imei = this.imei;\n    \n    //union._id = 'fuma'+ id;\n    champs.end = date.toJSON();\n    champs.id_champs = this.code_champs;\n\n    let champsFinal: any = {};\n    champsFinal._id = 'fuma'+':champs:'+ this.code_champs;\n    champsFinal.data = champs\n    this.servicePouchdb.createDocReturn(champsFinal).then((res) => {\n\n      /*let toast = this.toastCtl.create({\n        message: 'Champs bien enregistré!',\n        position: 'top',\n        duration: 1000\n      });*/\n\n       champsFinal._rev = res.rev;\n\n       this.champs.push(champsFinal)\n        //});\n\n        this.dechanfChamps()\n    });\n    \n    \n\n    //this.navCtrl.pop();\n    //toast.present();\n    \n\n  }\n\n  /*annuler(){\n    this.navCtrl.pop();\n  }*/\n\n  annuler(){\n    //this.navCtrl.pop();\n    if(this.champs.length <= 0){\n      this.viewCtl.dismiss();\n    }else{\n      //this.essais.push(this.essais)\n      this.viewCtl.dismiss(this.champs);\n    }\n    \n  }\n\n  back(){\n    //this.viewCtl.dismiss();\n     if(this.champs.length <= 0){\n      this.viewCtl.dismiss();\n    }else{\n      //this.essais.push(this.essais)\n      this.viewCtl.dismiss(this.champs);\n    }\n  }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/champs/ajouter-champs/ajouter-champs.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { AjouterChampsPage } from './ajouter-champs';\r\nimport { AutoCompleteModule } from 'ionic2-auto-complete';\r\n\r\n@NgModule({\r\n  declarations: [AjouterChampsPage],\r\n  imports: [AutoCompleteModule, IonicPageModule.forChild(AjouterChampsPage)],\r\n  exports: [AjouterChampsPage]\r\n})\r\nexport class AjouterChampsPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/champs/ajouter-champs/ajouter-champs.module.ts"],"sourceRoot":""}