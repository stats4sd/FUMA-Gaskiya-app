{"version":3,"sources":["../../src/pages/localite/ajouter-village/ajouter-village.ts","../../src/pages/localite/ajouter-village/ajouter-village.module.ts"],"names":[],"mappings":"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","file":"48.js","sourcesContent":["import { Component } from '@angular/core';\nimport { NavController, NavParams, IonicPage, ToastController, LoadingController, AlertController, ViewController, MenuController, Events } from 'ionic-angular';\nimport { Validators, FormBuilder } from '@angular/forms';\nimport { PouchdbProvider } from '../../../providers/pouchdb-provider';\n\n/**\n * Generated class for the AjouterVillagePage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-ajouter-village',\n  templateUrl: 'ajouter-village.html',\n})\nexport class AjouterVillagePage {\n  villageForm: any;\n  village: any;\n  allVillage: any = [];\n  nom_commune: any;\n  id_commune: any;\n  id: any = '';\n  nom: any = '';\n\n  //commune: any;\n  //allRegions: any = [];\n  ancien_nom: any = '';\n  ancien_id: any = '';\n\n  liste: boolean = false;\n  ajouter:boolean = true;\n  modifier: boolean = false;\n  commune_defini: boolean = false;\n  allCommune: any = [];\n  gestion_village: boolean = false;\n  \n  constructor(public navCtrl: NavController, public loadingCtl: LoadingController, public alertCtl: AlertController, public menuCtl: MenuController, public viewCtrl: ViewController, public navParams: NavParams,public toastCtl: ToastController, public servicePouchdb: PouchdbProvider, public formBuilder: FormBuilder) {\n  \n\n    if(this.navParams.data.liste){\n      this.liste = true;\n      this.gestion_village = true;\n      this.ajouter = false;\n    }\n    \n    if(this.navParams.data.id_commune){\n      this.id_commune = this.navParams.data.id_commune;\n      this.nom_commune = this.navParams.data.nom_commune;\n      this.commune_defini = true;\n    }\n    \n    \n    this.villageForm = this.formBuilder.group({\n      id:['', Validators.required],\n      nom:['', Validators.required],\n      id_commune:[''],\n      nom_commune:[''],\n    });\n  } \n\n  ionViewDidEnter() {\n     this.servicePouchdb.getDocById('village').then((village) => {\n       this.allVillage = village.data;\n       this.village = village;\n       //alert(this.commune._id)\n     });\n\n     this.servicePouchdb.getDocById('commune').then((communes) => {\n          this.allCommune = communes.data;\n        });\n  }\n\n  //fait la conbinaison de caractere de gauche vers la droite en variant la taille a la recherche d'un code disponible\n  genererID(){\n    \n    let nom = this.nom;\n     nom = nom.replace(' ' || '  ' || '    ' || '     ' || '      ' , '');\n     let taille_nom = nom.length;\n     let an = nom;\n    //taille initiale: deux aractères\n    let taille_code = 2;\n    let code: string = '';\n    this.id = code.toUpperCase()\n    let p = 0;\n    let last_position = 0;\n    let trouve: boolean;\n\n    if(taille_nom >= 2){\n      while(taille_code <= taille_nom){\n        last_position = taille_code - 1;\n        trouve  = false;\n        code = '';\n        for(let i = 0; i < taille_code; i++){\n          code += nom.charAt(i).toString() ;\n        }\n\n        do{\n            code = code.substr(0, code.length - 1);\n            code += nom.charAt(last_position).toString() ;\n            p = 0;\n            for(let pos=0; pos < this.allVillage.length; pos++){\n              let rg = this.allVillage[pos];\n              if(rg.id === code.toUpperCase()){\n                trouve = true;\n                break ;\n              }else{\n                trouve = false;\n              }\n            }\n            \n            last_position++;\n\n          }while(trouve && last_position < taille_nom);\n          //\n          if(last_position === taille_nom && trouve){\n            //non disponible, augmenter la taille du code\n            taille_code++;\n        \n            //au cas ou on teste toutes les combinaisons, sant trouver de combinaison disponible, on ajoute des chiffre\n            if(taille_code > taille_nom){\n              //non disponible, augmenter la taille et utiliser des chiffres\n              taille_code = 3;\n              nom = an + '123456789'.toString();\n              taille_nom = nom.length;\n            }\n          }else{\n              this.id = code.toUpperCase();\n              break;\n            \n          }\n      }\n      \n    }\n    \n  }\n\n   verifierUniqueNon(village){\n    let res = 1;\n    this.allVillage.forEach((p, index) => {\n      if((village.nom.toString().toUpperCase() === p.nom.toString().toUpperCase())){\n        res = 0;\n      }\n    });\n\n    return res;\n  }\n\n\n /* ajouter(){\n    \n    let village = this.villageForm.value;\n  //  if(this.verifierUniqueNon(region) === 0){\n    //  alert('Les noms des régions doivent être uniques!');\n    //}else{\n      let data = [];\n      data = this.village.data;\n      data.push(village);\n      this.village.data = data;\n      this.servicePouchdb.updateLocalite(this.village);\n      let toast = this.toastCtl.create({\n        message: 'Village bien enregistré!',\n        position: 'top',\n        duration: 3000\n      });\n\n      toast.present();\n      this.viewCtrl.dismiss();\n  //  }\n  } */\n\n  actionForm(){\n    let village = this.villageForm.value;\n    if(this.ajouter){\n        \n      if(this.verifierUniqueNon(village) === 0){\n        alert('Les noms des villages doivent être uniques!');\n      }else{\n\n        //let region = this.regionForm.value;\n  //  if(this.verifierUniqueNon(region) === 0){\n    //  alert('Les noms des régions doivent être uniques!');\n    //}else{\n        let data = [];\n        data = this.village.data;\n        if(!this.commune_defini){\n          village.id_commune = this.id_commune.id;\n          village.nom_commune = this.id_commune.nom;\n        }\n        data.push(village);\n        this.village.data = data;\n        this.village.type = 'village';\n        this.allVillage = data;\n        this.servicePouchdb.updateLocalite(this.village).then((res) => {\n          this.village._rev = res.rev;\n        })\n        let toast = this.toastCtl.create({\n          message: 'Village bien enregistré!',\n          position: 'top',\n          duration: 1000\n        });\n\n        toast.present();\n        this.ajouter = false;\n\n        if(!this.gestion_village){\n          this.viewCtrl.dismiss();\n        }else{\n          this.liste = true;\n          this.ajouter = false;\n        }\n      }\n    }else if(this.modifier){\n      let matricules: any = [];\n      let loading = this.loadingCtl.create({\n        content: 'Application des changements en cours...'\n      });\n\n      //loading.present();\n      //let region = this.regionForm.value;\n      if(!this.commune_defini){\n        village.id_commune = this.id_commune.id;\n        village.nom_commune = this.id_commune.nom;\n      }\n      this.allVillage.forEach((r, i) => {\n        if(r.id === village.id){\n          this.allVillage[i] = village;\n        }\n      });\n\n      this.village.data = this.allVillage;\n      //this.allcommune.splice(this.commune.indesOf())\n      //this.servicePouchdb.updateLocalite(this.village);\n      this.servicePouchdb.updateLocalite(this.village).then((res) => {\n          this.village._rev = res.rev;\n      })\n        //recuperer tous les doc pour modifier le nom du commune\n       /* this.servicePouchdb.getPlageDocsRapide('fuma', 'fuma:\\uffff').then((allDocs) => {\n          allDocs.map((doc) => {\n            //pour les essais\n            ********if(doc.doc.data.type === 'essai' && doc.doc.data.village_producteur === this.ancien_nom ){\n              doc.doc.data0village_producteur = commune.nom;\n              this.servicePouchdb.updateDoc(doc.doc);\n            }else *********\n            //pour les memebres\n            if(doc.doc.data.type === 'membre_op' && doc.doc.data.village === this.ancien_id ){\n              doc.doc.data.village_nom = village.nom;\n              this.servicePouchdb.updateDoc(doc.doc);\n              let info: any = {};\n              info.matricule = doc.doc.data.matricule_Membre;\n              info.village = village.nom\n              matricules.push(info);\n              info = {};\n            }\n            else \n            //pour les union\n            if(doc.doc.data.type === 'union' && doc.doc.data.village === this.ancien_id ){\n              doc.doc.data.village_nom = village.nom;\n              this.servicePouchdb.updateDoc(doc.doc);\n            }\n            else \n            //pour les op\n            if(doc.doc.data.type === 'op' && doc.doc.data.village === this.ancien_id ){\n              doc.doc.data.village_nom = village.nom;\n              this.servicePouchdb.updateDoc(doc.doc);\n            }\n           ********* else \n            //pour les champs\n            if(doc.doc.data.type === 'champs' && doc.doc.data.village === this.ancien_nom ){\n              doc.doc.data.village = commune.nom;\n              this.servicePouchdb.updateDoc(doc.doc);\n            }*******\n          });\n\n          if(matricules.length > 0){\n            for(let i = 0; i < matricules.length; i++){\n              this.servicePouchdb.getPlageDocsRapide('fuma:essai:'+matricules[i].matricule, 'fuma:essai:'+matricules[i].matricule+' \\uffff').then((essais) => {\n                  if(essais){\n                    essais.forEach((essai) => {\n                      essai.doc.data.village_producteur = +matricules[i].village;\n                      this.servicePouchdb.updateDoc(essai.doc)\n                    })\n                  }\n                });\n            }\n          }\n\n           let toast = this.toastCtl.create({\n              message: 'Village bien modifier!',\n              position: 'top',\n              duration: 1000\n            });\n            toast.present();  \n            loading.dismissAll();\n        });\n      */\n        let toast = this.toastCtl.create({\n              message: 'Village bien modifier!',\n              position: 'top',\n              duration: 1000\n            });\n            toast.present();\n\n        this.ajouter = false;\n        this.modifier = false;\n        this.liste = true;\n    }\n  } \n\n\n   ajouterVillage(){\n     this.id = '';\n     this.nom = '';\n     this.id_commune = '';\n     this.nom_commune = '';\n    this.liste = false;\n    this.ajouter = true;\n  }\n\n  modifierVillage(village){\n\n    this.id = village.id;\n    this.nom = village.nom;\n    this.id_commune = village.id_commune;\n    this.nom_commune = village.nom_commune;\n    this.ancien_nom = this.nom;\n    this.ancien_id = this.id;\n    this.liste = false;\n    this.modifier = true;\n\n    this.allCommune.forEach((commune) => {\n      if(this.id_commune === commune.id){\n        this.id_commune = commune;\n      }\n    })\n  }\n\n  supprimerVillage(village){\n    let e: any = {};\n    let alert = this.alertCtl.create({\n      title: 'Suppression village',\n      message: 'Etes vous sûr de supprimer ce village ?',\n      buttons:[\n        {\n          text: 'Non',\n          handler: () => console.log('suppression annulée')\n \n        },\n        {\n          text: 'Oui',\n          handler: () => {\n            this.allVillage.forEach((r, i) => {\n              if(r.id === village.id){\n                this.allVillage.splice(i, 1);\n              }\n            });\n\n            this.village.data = this.allVillage;\n            //this.allcommune.splice(this.commune.indesOf())\n            //this.servicePouchdb.updateLocalite(this.village);\n            this.servicePouchdb.updateLocalite(this.village).then((res) => {\n              this.village._rev = res.rev;\n            })\n            let toast = this.toastCtl.create({\n              message: 'Village bien suprimé!',\n              position: 'top',\n              duration: 1000\n            });\n            toast.present();           \n          }\n        }\n      ]\n    });\n\n    alert.present();\n  }\n\n  annuler(){\n    if(this.gestion_village){\n      if(this.liste){\n        this.viewCtrl.dismiss();\n      }else if(this.ajouter){\n        this.liste = true;\n        this.ajouter = false;\n      } else{\n        this.liste = true;\n        this.modifier = false;\n      }\n\n    }else{\n      this.viewCtrl.dismiss();\n    }\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/localite/ajouter-village/ajouter-village.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AjouterVillagePage } from './ajouter-village';\n\n@NgModule({\n  declarations: [\n    AjouterVillagePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AjouterVillagePage),\n  ],\n  exports: [\n    AjouterVillagePage\n  ]\n})\nexport class AjouterVillagePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/localite/ajouter-village/ajouter-village.module.ts"],"sourceRoot":""}