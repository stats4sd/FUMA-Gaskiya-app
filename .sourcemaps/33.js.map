{"version":3,"sources":["../../src/pages/security/profile/profile-user.ts","../../src/pages/security/profile/profile-user.module.ts"],"names":[],"mappings":"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","file":"33.js","sourcesContent":["import { Component } from '@angular/core';\nimport { NavController, ViewController, NavParams, IonicPage } from 'ionic-angular';\nimport { PouchdbProvider } from '../../../providers/pouchdb-provider';\n//import { ModifierProfilePage } from './modifier-profile/modifier-profile';\nimport { Storage } from '@ionic/storage';\nimport { TranslateService } from '@ngx-translate/core';\nimport { global } from '../../../global-variables/variable';\n\n/*\n  Generated class for the Profile page.\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n  Ionic pages and navigation.\n*/\n@IonicPage()\n@Component({\n  selector: 'page-profile-user',\n  templateUrl: 'profile-user.html'\n})\nexport class ProfileUserPage {\n\n  user: any = {} ; \n  estAdmin: any = false;\n \n  constructor(public translate: TranslateService, public viewCtl: ViewController, public storage:Storage, public navCtrl: NavController, public navParams: NavParams, public gestionService: PouchdbProvider) {\n    this.translate.setDefaultLang(global.langue);\n  }\n\n       dismiss(){\n    this.viewCtl.dismiss();\n  }\n  \n  ionViewDidLoad() {\n    //console.log('ionViewDidLoad ProfileUserPage');\n  }\n\n  ionViewDidEnter() {\n    this.translate.use(global.langue);\n    //this.user = global.info_user;\n    this.gestionService.remoteSaved.getSession((err, response) => {\n      if (err) {\n        // network error\n        alert('Erreur du réseau');\n        this.user = global.info_user;\n        alert('Information de l\\'anciènne connexion chargées');\n        /*this.storage.get('info_user').then((user) => {\n          if(user){\n            this.user = user;\n            alert('Information de l\\'anciènne connexion chargées');\n          }\n        });*/\n      } else if (!response.userCtx.name) {\n        // nobody's logged in\n        alert('Personne n\\'est connecté');\n        this.user = global.info_user;\n        alert('Information de l\\'anciènne connexion chargées');\n        /*this.storage.get('info_user').then((user) => {\n          if(user){\n            this.user = user;\n            alert('Information de l\\'anciènne connexion chargées');\n          }\n        });*/\n      } else {\n        // response.userCtx.name is the current user\n        this.gestionService.remoteSaved.getUser(response.userCtx.name, (err, us) => {\n          if (err) {\n            if (err.name === 'not_found') {\n              // typo, or you don't have the privileges to see this user\n              alert('Privilèges insuffiasants:'+response.userCtx.name+\"  \"+response.userCtx.roles);\n              this.user = global.info_user;\n              alert('Information de l\\'anciènne connexion chargées');\n            } else {\n              // some other error\n              alert('Erreur');\n              this.user = global.info_user;\n              alert('Information de l\\'anciènne connexion chargées');\n            }\n          } else {\n            // response is the user object\n            this.user = us;\n            global.info_user = us;\n            this.storage.set('info_user', us);\n          }\n        });\n      }\n    });\n  }\n \n editer(user, motif){\n  this.navCtrl.push('ModifierProfilePage', {'user': user, 'motif': motif})\n }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/security/profile/profile-user.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ProfileUserPage } from './profile-user';\r\n//import { TranslationModule } from '../../../translation/translate.module'\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\n\r\n@NgModule({\r\n  declarations: [ProfileUserPage],\r\n  imports: [TranslateModule, IonicPageModule.forChild(ProfileUserPage)],\r\n  exports: [ProfileUserPage]\r\n})\r\nexport class ProfileUserPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/security/profile/profile-user.module.ts"],"sourceRoot":""}